# MySQL 优化指南

性能优化的核心在于减少磁盘 I/O 和 CPU 的计算负担。

## 1. 索引优化 (最重要)

- **选择合适的索引**: B+Tree 是默认类型，适用于范围查询。
- **最左匹配原则**: 多列索引时，查询需从左向右匹配。
- **覆盖索引**: 只通过索引就能获取所有数据，无需“回表”。
- **避免索引失效**:
  - 不要在索引列上做运算（如 `year(create_time) = 2023`）。
  - 避免模糊查询以 `%` 开头。

## 2. 查询优化

- **避免 `SELECT *`**: 只取需要的字段。
- **使用 `EXPLAIN`**: 分析查询计划，查看是否命中索引。
- **分页优化**: `LIMIT 1000000, 10` 会扫描前一百万行，改用游标或 ID 范围。

## 3. 架构优化

- **读写分离**: 主库写，从库读。
- **分库分表**: 应对海量数据（如超过 500 万行或文件大小超过 2GB）。

```sql
-- 使用 EXPLAIN 查看执行计划
EXPLAIN SELECT id, name FROM users WHERE email = 'test@example.com';
```
